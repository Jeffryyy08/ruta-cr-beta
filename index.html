<script type="module">

import { supabase } from './supabase.js'

async function loadRoutes() {

  const container = document.getElementById("routes")
  container.innerHTML = "Cargando rutas..."

  const { data, error } = await supabase
    .from('routes')
    .select('*')
    .eq('active', true)

  if (error) {
    console.error(error)
    container.innerHTML = "Error cargando rutas"
    return
  }

  if (!data || data.length === 0) {
    container.innerHTML = "No hay rutas activas"
    return
  }

  container.innerHTML = ""

  data.forEach(route => {

    const div = document.createElement("div")
    div.className = "route"
    div.innerText = route.name

    div.addEventListener("click", () => {
      window.location.href = `route.html?route_id=${route.id}`
    })

    container.appendChild(div)
  })
}

loadRoutes()

</script>
